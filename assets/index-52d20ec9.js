import{f as y,a as m,b as Ce,t as ge,i as Ee,s as N,c as A,p as O,d as ke,e as Oe,r as u,j as C,S as _,g as c,I as E,h as Se,k as Le,l as be,m as Ae,n as He,C as Be,o as b,P as Re,T as we,q as $e,A as Ie,B as M,u as Te,G as p,v as g,w as h,x as v,y as xe,z as K,D as P,E as H,F as B,H as V,J as F,K as Ne,L as _e,M as Me,N as U,O as ve,Q as Ke,R as Pe,U as Ve}from"./vendor-7414bfa3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const j=e=>()=>Ce(localStorage.getItem(e)),W=(e,t)=>ge(()=>(localStorage.setItem(e,JSON.stringify(t)),t),Ee),z=e=>t=>(W(e,t)(),t),D=e=>y(j(e),m(()=>null,JSON.parse))(),Fe=(e,t)=>(W(t,e)(),e),G=e=>y(j(e),m(()=>[],JSON.parse))(),Ue=5;var k=(e=>(e.SELECT="SELECT",e.REMOVE="REMOVE",e.LOCK="LOCK",e.UNLOCK="UNLOCK",e.SWAP="SWAP",e))(k||{});const $=e=>e.reduce((t,n)=>("locked"in n?t[1].push(n):t[0].push(n),t),[[],[]]),I=Oe("locked"),je={SELECT:(e,t)=>O(e,ke(n=>n.code===t.code),m(()=>{const[n,o]=$(e);n.unshift(t),o.forEach(s=>{n.splice(s.locked,0,s)});const r=n;return r.length>Ue?r.slice(0,-1):r},()=>e)),REMOVE:(e,t)=>{const[n,o]=$(e.filter((r,s)=>s!==t));return o.forEach(r=>{n.splice(r.locked,0,I(r))}),n},LOCK:(e,t)=>e.map((n,o)=>o===t?{...n,locked:o}:n),UNLOCK:(e,t)=>e.map((n,o)=>o===t?I(n):n),SWAP:(e,t)=>{const[n,o]=t;if(e[n]===void 0||e[o]===void 0||n===o)return e;const r=[...e],s=r[n];"locked"in s&&(s.locked=o);const a=r[o];return"locked"in a&&(a.locked=n),[r[n],r[o]]=[r[o],r[n]],r}},J=(e,t,n)=>n.type in e?e[n.type](t,n.payload):t,q=(e,t,n=[])=>e.pipe(N((o,r)=>Fe(J(je,o,r),t),n)),We={SELECT:(e,t)=>t,REMOVE:()=>null},Y=(e,t)=>e.pipe(N((n,o)=>J(We,n,o),t)).pipe(A(t)),X=e=>t=>e({type:"SELECT",payload:t}),ze=u.forwardRef(({currency:e,dispatchAction:t,index:n,history:o,onClose:r},s)=>{const a=u.useCallback(()=>{t({type:k.REMOVE,payload:n}),r()},[n,t]),l=u.useCallback((d,i)=>{d<0||i<0||d>=o.length||i>=o.length||t({type:k.SWAP,payload:[d,i]})},[t,n,o]),f=u.useCallback(()=>{t({type:k.LOCK,payload:n}),r()},[n,t,r]);return C(_,{direction:"row",spacing:1,ref:s,children:[c(E,{color:"error",onClick:a,children:c(Se,{})}),c(E,{onClick:()=>l(n,n-1),children:c(Le,{})}),c(E,{onClick:()=>l(n,n+1),children:c(be,{})}),c(E,{onClick:f,children:"locked"in e?c(Ae,{}):c(He,{})})]})}),De=u.memo(({isActive:e,currency:t,onSelect:n,onLongPress:o,isLocked:r})=>{const s=u.useRef(null),a=u.useCallback(()=>{e?o(t,s.current):n(t)},[t,n,e]);return c(Be,{ref:s,sx:{backgroundColor:l=>e?l.palette.primary.light:r?"#B2F6FFFF":b[100],border:l=>`1px solid ${e?l.palette.primary.dark:b[600]}`,"&:hover":{backgroundColor:l=>e?l.palette.primary.light:r?"#c9f7fd":b[300]}},color:e?"primary":"default",label:t.code.toUpperCase(),onClick:a,clickable:!0})},(e,t)=>e.isActive===t.isActive&&e.currency.code===t.currency.code),Ge=({list:e,align:t,active:n,dispatchAction:o})=>{const[r,s]=u.useState(null),[a,l]=u.useState(null),f=u.useCallback((i,L)=>{l(i),s(L)},[]),d=u.useCallback(()=>{l(null),s(null)},[]);return C(_,{direction:"row",spacing:1,children:[c(Re,{open:a!==null,anchorEl:r,onClose:d,elevation:0,anchorOrigin:{vertical:t,horizontal:"center"},transformOrigin:{vertical:t==="top"?"bottom":"top",horizontal:"center"},children:a&&c(ze,{dispatchAction:o,currency:a,index:e.findIndex(i=>i.code===a.code),history:e,onClose:d})}),e.map(i=>O([n!==null&&n.code===i.code,"locked"in i],([L,me])=>c(De,{isActive:L,isLocked:me,currency:i,onSelect:X(o),onLongPress:f},i.code)))]})},S=({onValueChange:e,...t})=>c(we,{InputLabelProps:{shrink:!0},onChange:n=>e&&e(n.target.value),sx:{width:"100%",...t==null?void 0:t.sx},...t}),Je=Te({ignoreCase:!0,stringify:e=>e.code+e.title}),qe=({value:e,currencies:t,select:n})=>c(Ie,{value:e,options:t,filterOptions:Je,isOptionEqualToValue:(o,r)=>o.code===r.code,getOptionLabel:({code:o,title:r})=>o?`(${o.toUpperCase()}) ${r}`:"",onChange:(o,r)=>r&&n(r),autoHighlight:!0,renderOption:(o,r)=>C(M,{component:"li",...o,children:["(",r.code.toUpperCase(),") ",r.title]}),renderInput:o=>c(S,{...o,label:"Select currency",inputProps:{...o.inputProps,autoComplete:"new-password"}})}),Ye=({currencies:e,value:t,select:n})=>O(e,m(()=>c(S,{disabled:!0,value:"loading currencies..."}),o=>O(o,$e(()=>c(S,{disabled:!0,value:"Unable to load currencies"}),r=>c(qe,{select:n,currencies:r,value:t}))))),Xe=e=>e===""?e:Number(e),T=({currenciesToSelect:e,activeCurrency:t,value:n,setValue:o,history:r,align:s,dispatchAction:a})=>C(p,{container:!0,direction:s==="bottom"?"column-reverse":"column",spacing:2,children:[c(p,{item:!0,children:c(Ge,{align:s,active:t,dispatchAction:a,list:r})}),c(p,{item:!0,children:c(Ye,{currencies:e,select:X(a),value:t})}),c(p,{item:!0,children:c(S,{disabled:t==null,onValueChange:y(Xe,o),type:"number",value:n})})]}),Q="latest",Z=(e,t)=>`https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/${e}/${t}`,[ee,gt]=g(),Qe=e=>Object.entries(e).map(([t,n])=>({code:t,title:n})),te=()=>async e=>e.ok?e.json():e.text().then(t=>Promise.reject(t)),ne=e=>Ne(B(_e({error:!0,message:e.message}))),[Ze]=h(ee.pipe(A(Q),v(e=>K(Z(e,"currencies.min.json")).pipe(P(te()),H(y(Qe,V,B)),F(ne)))),xe),et=e=>({date:e.date,currency:"usd",rate:e.usd}),[Et,tt]=h(ee.pipe(A(Q),v(e=>K(Z(e,"currencies/usd.min.json")).pipe(P(te()),H(y(et,V,B)),F(ne))))),nt=()=>c(M,{sx:{padding:2,display:"flex",justifyContent:"center"},children:c(Me,{color:"action",fontSize:"large"})}),[re,rt]=g(),[oe,ot]=g(),ce="LATEST_A",se="LATEST_B",ae=D(ce),le=D(se),R=Y(re,ae),w=Y(oe,le),[ct]=h(R.pipe(U(z(ce))),ae),[st]=h(w.pipe(U(z(se))),le),ie="HISTORY_A",ue="HISTORY_B",de=G(ie),pe=G(ue),at=q(re,ie,de),lt=q(oe,ue,pe),[it]=h(at,de),[ut]=h(lt,pe),[dt,he]=g(),[pt,fe]=g(),ht=m(()=>null,ve(()=>null)),ye=(e,t,n,o)=>Ke([e,t,n,tt]).pipe(H(([[r,s],a,l,f])=>{if(s){const d=ht(f);if(r!==""){if(d&&a&&l){const i=r/d.rate[a.code]*d.rate[l.code];o([Number(i.toFixed(2)),!1])}}else o(["",!1])}return r})),[ft]=h(ye(dt,R,w,fe),""),[yt]=h(ye(pt,w,R,he),""),x=e=>t=>{e([t,!0])},mt=()=>{const e=Ze(),t=ft(),n=yt(),o=it(),r=ut(),s=ct(),a=st(),l=x(he),f=x(fe);return u.useEffect(()=>{s&&l(1)},[]),c(Pe,{maxWidth:"sm",sx:{height:"100%",display:"flex",alignItems:"center"},children:C(p,{container:!0,direction:"column",children:[c(p,{item:!0,children:c(T,{align:"top",value:t,currenciesToSelect:e,history:o,activeCurrency:s,dispatchAction:rt,setValue:l})}),c(p,{item:!0,children:c(nt,{})}),c(p,{item:!0,children:c(T,{align:"bottom",value:n,currenciesToSelect:e,history:r,activeCurrency:a,dispatchAction:ot,setValue:f})})]})})};Ve(document.getElementById("root")).render(c(u.StrictMode,{children:c(mt,{})}));
