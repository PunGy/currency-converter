import{f as m,a as y,b as Ce,t as ge,i as Ee,s as x,c as A,p as S,d as ke,e as Se,r as i,j as C,S as N,g as s,I as E,h as Oe,k as be,l as Le,m as Ae,n as Re,C as He,o as L,P as Be,T as we,q as Te,A as Ie,B as _,u as $e,G as h,v as g,w as f,x as v,y as Me,z as P,D as K,E as R,F as H,H as V,J as U,K as xe,L as Ne,M as _e,N as j,O as ve,Q as Pe,R as Ke,U as Ve}from"./vendor-7414bfa3.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=n(r);fetch(r.href,c)}})();const F=e=>()=>Ce(localStorage.getItem(e)),D=(e,t)=>ge(()=>(localStorage.setItem(e,JSON.stringify(t)),t),Ee),W=e=>t=>(D(e,t)(),t),z=e=>m(F(e),y(()=>null,JSON.parse))(),Ue=(e,t)=>(D(t,e)(),e),G=e=>m(F(e),y(()=>[],JSON.parse))(),je=5;var k=(e=>(e.SELECT="SELECT",e.REMOVE="REMOVE",e.LOCK="LOCK",e.UNLOCK="UNLOCK",e.SWAP="SWAP",e))(k||{});const T=e=>e.reduce((t,n)=>("locked"in n?t[1].push(n):t[0].push(n),t),[[],[]]),I=Se("locked"),Fe={SELECT:(e,t)=>S(e,ke(n=>n.code===t.code),y(()=>{const[n,o]=T(e);n.unshift(t),o.forEach(c=>{n.splice(c.locked,0,c)});const r=n;return r.length>je?r.slice(0,-1):r},()=>e)),REMOVE:(e,t)=>{const[n,o]=T(e.filter((r,c)=>c!==t));return o.forEach(r=>{n.splice(r.locked,0,I(r))}),n},LOCK:(e,t)=>e.map((n,o)=>o===t?{...n,locked:o}:n),UNLOCK:(e,t)=>e.map((n,o)=>o===t?I(n):n),SWAP:(e,t)=>{const[n,o]=t;if(e[n]===void 0||e[o]===void 0||n===o)return e;const r=[...e],c=r[n];"locked"in c&&(c.locked=o);const a=r[o];return"locked"in a&&(a.locked=n),[r[n],r[o]]=[r[o],r[n]],r}},J=(e,t,n)=>n.type in e?e[n.type](t,n.payload):t,q=(e,t,n=[])=>e.pipe(x((o,r)=>Ue(J(Fe,o,r),t),n)),De={SELECT:(e,t)=>t,REMOVE:()=>null},Y=(e,t)=>e.pipe(x((n,o)=>J(De,n,o),t)).pipe(A(t)),X=e=>t=>e({type:"SELECT",payload:t}),We=i.forwardRef(({currency:e,dispatchAction:t,index:n,history:o,onClose:r},c)=>{const a=i.useCallback(()=>{t({type:k.REMOVE,payload:n}),r()},[n,t]),u=i.useCallback((d,l)=>{d<0||l<0||d>=o.length||l>=o.length||t({type:k.SWAP,payload:[d,l]})},[t,n,o]),p=i.useCallback(()=>{t({type:k.LOCK,payload:n}),r()},[n,t,r]);return C(N,{direction:"row",spacing:1,ref:c,children:[s(E,{color:"error",onClick:a,children:s(Oe,{})}),s(E,{onClick:()=>u(n,n-1),children:s(be,{})}),s(E,{onClick:()=>u(n,n+1),children:s(Le,{})}),s(E,{onClick:p,children:"locked"in e?s(Ae,{}):s(Re,{})})]})}),ze=i.memo(({isActive:e,currency:t,onSelect:n,onLongPress:o,isLocked:r})=>{const c=i.useRef(),a=i.useRef(),u=i.useRef(null),p=i.useCallback(()=>{c.current=setTimeout(()=>{a.current=!0,o(t,u.current)},700)},[t,o]),d=i.useCallback(()=>{clearTimeout(c.current),a.current?a.current=!1:n(t)},[t,n]);return s(He,{ref:u,sx:{backgroundColor:l=>e?l.palette.primary.light:r?"#ff748e":L[100],border:l=>`1px solid ${e?l.palette.primary.dark:L[600]}`,"&:hover":{backgroundColor:l=>e?l.palette.primary.light:r?"#ff97ab":L[300]}},color:e?"primary":"default",label:t.code.toUpperCase(),onMouseDown:p,onTouchStart:p,onMouseUp:d,onTouchEnd:d,clickable:!0})},(e,t)=>e.isActive===t.isActive&&e.currency.code===t.currency.code),Ge=({list:e,align:t,active:n,dispatchAction:o})=>{const[r,c]=i.useState(null),[a,u]=i.useState(null),p=i.useCallback((l,b)=>{u(l),c(b)},[]),d=i.useCallback(()=>{u(null),c(null)},[]);return C(N,{direction:"row",spacing:1,children:[s(Be,{open:a!==null,anchorEl:r,onClose:d,elevation:0,anchorOrigin:{vertical:t,horizontal:"center"},transformOrigin:{vertical:t==="top"?"bottom":"top",horizontal:"center"},children:a&&s(We,{dispatchAction:o,currency:a,index:e.findIndex(l=>l.code===a.code),history:e,onClose:d})}),e.map(l=>S([n!==null&&n.code===l.code,"locked"in l],([b,ye])=>s(ze,{isActive:b,isLocked:ye,currency:l,onSelect:X(o),onLongPress:p},l.code)))]})},O=({onValueChange:e,...t})=>s(we,{InputLabelProps:{shrink:!0},onChange:n=>e&&e(n.target.value),sx:{width:"100%",...t==null?void 0:t.sx},...t}),Je=$e({ignoreCase:!0,stringify:e=>e.code+e.title}),qe=({value:e,currencies:t,select:n})=>s(Ie,{value:e,options:t,filterOptions:Je,isOptionEqualToValue:(o,r)=>o.code===r.code,getOptionLabel:({code:o})=>o?o.toUpperCase():"",onChange:(o,r)=>r&&n(r),autoHighlight:!0,renderOption:(o,r)=>C(_,{component:"li",...o,children:["(",r.code.toUpperCase(),") ",r.title]}),renderInput:o=>s(O,{...o,label:"Select currency",inputProps:{...o.inputProps,autoComplete:"new-password"}})}),Ye=({currencies:e,value:t,select:n})=>S(e,y(()=>s(O,{disabled:!0,value:"loading currencies..."}),o=>S(o,Te(()=>s(O,{disabled:!0,value:"Unable to load currencies"}),r=>s(qe,{select:n,currencies:r,value:t}))))),Xe=e=>e===""?e:Number(e),$=({currenciesToSelect:e,activeCurrency:t,value:n,setValue:o,history:r,align:c,dispatchAction:a})=>C(h,{container:!0,direction:c==="bottom"?"column-reverse":"column",spacing:2,children:[s(h,{item:!0,children:s(Ge,{align:c,active:t,dispatchAction:a,list:r})}),s(h,{item:!0,children:s(Ye,{currencies:e,select:X(a),value:t})}),s(h,{item:!0,children:s(O,{disabled:t==null,onValueChange:m(Xe,o),type:"number",value:n})})]}),Q="latest",Z=(e,t)=>`https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/${e}/${t}`,[ee,gt]=g(),Qe=e=>Object.entries(e).map(([t,n])=>({code:t,title:n})),te=()=>async e=>e.ok?e.json():e.text().then(t=>Promise.reject(t)),ne=e=>xe(H(Ne({error:!0,message:e.message}))),[Ze]=f(ee.pipe(A(Q),v(e=>P(Z(e,"currencies.min.json")).pipe(K(te()),R(m(Qe,V,H)),U(ne)))),Me),et=e=>({date:e.date,currency:"usd",rate:e.usd}),[Et,tt]=f(ee.pipe(A(Q),v(e=>P(Z(e,"currencies/usd.min.json")).pipe(K(te()),R(m(et,V,H)),U(ne))))),nt=()=>s(_,{sx:{padding:2,display:"flex",justifyContent:"center"},children:s(_e,{color:"action",fontSize:"large"})}),[re,rt]=g(),[oe,ot]=g(),se="LATEST_A",ce="LATEST_B",ae=z(se),le=z(ce),B=Y(re,ae),w=Y(oe,le),[st]=f(B.pipe(j(W(se))),ae),[ct]=f(w.pipe(j(W(ce))),le),ie="HISTORY_A",ue="HISTORY_B",de=G(ie),pe=G(ue),at=q(re,ie,de),lt=q(oe,ue,pe),[it]=f(at,de),[ut]=f(lt,pe),[dt,he]=g(),[pt,fe]=g(),ht=y(()=>null,ve(()=>null)),me=(e,t,n,o)=>Pe([e,t,n,tt]).pipe(R(([[r,c],a,u,p])=>{if(c){const d=ht(p);if(r!==""){if(d&&a&&u){const l=r/d.rate[a.code]*d.rate[u.code];o([Number(l.toFixed(2)),!1])}}else o(["",!1])}return r})),[ft]=f(me(dt,B,w,fe),""),[mt]=f(me(pt,w,B,he),""),M=e=>t=>{e([t,!0])},yt=()=>{const e=Ze(),t=ft(),n=mt(),o=it(),r=ut(),c=st(),a=ct(),u=M(he),p=M(fe);return i.useEffect(()=>{c&&u(1)},[]),s(Ke,{maxWidth:"sm",sx:{height:"100%",display:"flex",alignItems:"center"},children:C(h,{container:!0,direction:"column",children:[s(h,{item:!0,children:s($,{align:"top",value:t,currenciesToSelect:e,history:o,activeCurrency:c,dispatchAction:rt,setValue:u})}),s(h,{item:!0,children:s(nt,{})}),s(h,{item:!0,children:s($,{align:"bottom",value:n,currenciesToSelect:e,history:r,activeCurrency:a,dispatchAction:ot,setValue:p})})]})})};Ve(document.getElementById("root")).render(s(i.StrictMode,{children:s(yt,{})}));
