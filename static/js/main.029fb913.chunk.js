(this["webpackJsonpcurrency-converter"]=this["webpackJsonpcurrency-converter"]||[]).push([[0],{106:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),o=n(30),a=n.n(o),i=(n(97),n(19)),u=n(10),l=n(166),s=n(165),d=n(164),p=n(161),b=n(73),f=n.n(b),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest";return fetch("https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/".concat(t,"/").concat(e)).then((function(e){return e.json()}))},g=function(e){return j("currencies/".concat(e,".min.json")).then((function(t){return{date:t.date,currency:e,rate:t[e]}}))},h=n(149),O=n(158),v=n(159),m=n(2),x=Object(h.a)({ignoreCase:!0,stringify:function(e){return e.code+e.label}}),y=c.memo((function(e){var t=e.currencies,n=e.label,c=e.onSelect,r=e.value;return Object(m.jsx)(O.a,{onChange:function(e,t){return t&&c(t)},filterOptions:x,sx:{width:300},options:t,value:r,autoHighlight:!0,getOptionLabel:function(e){return e.code.toUpperCase()},isOptionEqualToValue:function(e,t){return e.code===t.code},renderOption:function(e,t){return Object(m.jsxs)(s.a,Object(i.a)(Object(i.a)({component:"li"},e),{},{children:["(",t.code.toUpperCase(),") ",t.label]}))},renderInput:function(e){return Object(m.jsx)(v.a,Object(i.a)(Object(i.a)({},e),{},{label:n,inputProps:Object(i.a)(Object(i.a)({},e.inputProps),{},{autoComplete:"new-password"})}))}})})),S=n(75),C=n(162),w=n(157),k=n(71),I=r.a.memo((function(e){var t=e.list,n=e.selected,c=e.onSelectCurrency,r=Object(S.a)(e,["list","selected","onSelectCurrency"]);return Object(m.jsx)(w.a,Object(i.a)(Object(i.a)({direction:"row",spacing:1},r),{},{children:t.map((function(e){var t=null!==n&&e.code===n.code;return Object(m.jsx)(C.a,{sx:{backgroundColor:function(e){return t?e.palette.primary.light:k.a[100]},border:function(e){return"1px solid ".concat(t?e.palette.primary.dark:k.a[600])},"&:hover":{backgroundColor:function(e){return t?e.palette.primary.light:k.a[300]}}},color:t?"primary":"default",label:e.code.toUpperCase(),onClick:function(){return c(e)},clickable:!0},e.code)}))}))})),J=r.a.memo((function(e){return Object(m.jsx)(v.a,Object(i.a)({sx:{width:300},type:"number",InputLabelProps:{shrink:!0}},e))})),N=function(e,t){return t.find((function(t){return t.code===e.code}))?t:[e].concat(t.slice(0,4))},W=function(e){var t=e.input,n=e.updateInput,c=e.updateOutput,r=e.inputCurrency,o=e.outputCurrency,a=e.exchangeRate;if(n((function(){return t})),console.log(r,o,a),null!=r&&null!=o&&null!=a){var i=+t,u=a.currency===r.code?i*a.rate[o.code]:i/a.rate[r.code];c((function(){return u.toFixed(2)}))}};function P(){var e=r.a.useState([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=r.a.useState(null),a=Object(u.a)(o,2),b=a[0],h=a[1],O=r.a.useState(null),v=Object(u.a)(O,2),x=v[0],S=v[1],C=r.a.useState([]),w=Object(u.a)(C,2),k=w[0],P=w[1],L=r.a.useState([]),T=Object(u.a)(L,2),U=T[0],A=T[1],E=r.a.useState(""),F=Object(u.a)(E,2),R=F[0],B=F[1],z=r.a.useState(""),q=Object(u.a)(z,2),D=q[0],H=q[1],M=r.a.useState(),V=Object(u.a)(M,2),$=V[0],G=V[1];r.a.useEffect((function(){j("currencies.json").then((function(e){return Object.entries(e).map((function(e){var t=Object(u.a)(e,2);return{code:t[0],label:t[1]}}))})).then(c).catch(console.log);var e=localStorage.getItem("latest-currencies-top"),t=localStorage.getItem("latest-currencies-bottom");null!=e&&P(JSON.parse(e)),null!=t&&A(JSON.parse(t));var n=localStorage.getItem("last-currency-top"),r=localStorage.getItem("last-currency-bottom");if(null!=n){var o=JSON.parse(n);g(o.code).then(G),h(JSON.parse(n))}null!=r&&S(JSON.parse(r))}),[]);var K=r.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W(Object(i.a)({input:"object"===typeof e?e.target.value:e,inputCurrency:b,outputCurrency:x,updateInput:B,updateOutput:H,exchangeRate:$},t))}),[b,x,$]),Q=r.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return W(Object(i.a)({input:"object"===typeof e?e.target.value:e,inputCurrency:x,outputCurrency:b,updateInput:H,updateOutput:B,exchangeRate:$},t))}),[b,x,$]),X=r.a.useCallback((function(e){(null===b||void 0===b?void 0:b.code)!==e.code&&(h(e),P((function(t){var n=N(e,t);return localStorage.setItem("latest-currencies-top",JSON.stringify(n)),n})),localStorage.setItem("last-currency-top",JSON.stringify(e)),g(e.code).then((function(t){G(t),K(R,{inputCurrency:e,exchangeRate:t})})))}),[R,b,K]),Y=r.a.useCallback((function(e){(null===x||void 0===x?void 0:x.code)!==e.code&&(S(e),A((function(t){var n=N(e,t);return n.length!==t.length&&localStorage.setItem("latest-currencies-bottom",JSON.stringify(n)),n})),localStorage.setItem("last-currency-bottom",JSON.stringify(e)),K(R,{outputCurrency:e}))}),[R,K,x]);return Object(m.jsx)(l.a,{sx:{height:"100vh"},children:Object(m.jsx)(s.a,{sx:{height:"100%",display:"flex",alignItems:"center"},children:Object(m.jsxs)(d.a,{sx:{width:"100%",padding:2},children:[Object(m.jsxs)(p.a,{container:!0,direction:"column",spacing:2,alignContent:"center",sx:{position:"relative",paddingTop:"40px"},children:[Object(m.jsxs)(p.a,{item:!0,children:[Object(m.jsx)(I,{sx:{position:"absolute",top:10},selected:b,list:k,onSelectCurrency:X}),Object(m.jsx)(y,{value:b,onSelect:X,label:"Select currency",currencies:n})]}),Object(m.jsx)(p.a,{item:!0,children:Object(m.jsx)(J,{value:R,onChange:K,label:"Amount",disabled:null==b})})]}),Object(m.jsx)(s.a,{sx:{padding:2,display:"flex",justifyContent:"center"},children:Object(m.jsx)(f.a,{color:"action",fontSize:"large"})}),Object(m.jsxs)(p.a,{container:!0,direction:"column",spacing:2,alignContent:"center",sx:{position:"relative",paddingBottom:"40px"},children:[Object(m.jsx)(p.a,{item:!0,children:Object(m.jsx)(J,{value:D,onChange:Q,label:"Amount",disabled:null==x})}),Object(m.jsxs)(p.a,{item:!0,children:[Object(m.jsx)(y,{value:x,onSelect:Y,label:"Select currency",currencies:n}),Object(m.jsx)(I,{sx:{position:"absolute",bottom:0},selected:x,list:U,onSelectCurrency:Y})]})]})]})})})}var L=r.a.memo(P),T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,167)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))},U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var E=n(74),F=n(163),R=Object(E.a)({palette:{primary:{main:"#63d3d3"}}});a.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(F.a,{theme:R,children:Object(m.jsx)(L,{})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/currency-converter",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/currency-converter","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):A(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):A(t,e)}))}}(),T()},97:function(e,t,n){}},[[106,1,2]]]);
//# sourceMappingURL=main.029fb913.chunk.js.map